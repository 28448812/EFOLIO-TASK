import{r,k as b,o as d,c as h,b as e,t as a,e as k,d as E,l as x,v as W,m as I,q as p}from"./index-fe519237.js";import{L as N}from"./LogoutButton-d9be2cd7.js";import{a as v}from"./axios-edfcd65b.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import"./auth-eb6cacca.js";const P={class:"weather-search-container"},V={class:"weather-header"},$={class:"userWrip"},C={class:"username-display"},S={class:"weather-content"},A={class:"search-section"},K={class:"input-group"},M=["disabled"],R={key:0,class:"error-message"},T={key:1,class:"weather-result"},q={class:"weather-card"},D={class:"weather-header-info"},L={class:"city-name"},H={class:"temperature"},U={class:"weather-details"},Y={class:"weather-main"},j={class:"weather-icon"},z=["src","alt"],F={class:"weather-description"},O={class:"weather-stats"},G={class:"stat-item"},J={class:"stat-value"},Q={class:"stat-item"},X={class:"stat-value"},Z={class:"stat-item"},ee={class:"stat-value"},se={class:"stat-item"},te={class:"stat-value"},ae={class:"stat-item"},oe={class:"stat-value"},ie={__name:"Weather",setup(ne){const n=r(""),t=r(null),l=r(!1),i=r(""),m=localStorage.getItem("userName"),u={}.VITE_OPENWEATHER_API_KEY,_=async()=>{var c,s;if(!n.value.trim()){i.value="Please enter city name";return}l.value=!0,i.value="",t.value=null;try{const o=await v.get(`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(n.value)}&appid=${u}`);if(!o.data||o.data.length===0)throw new Error("The city was not found. Please check if the city name is correct.");const w=o.data[0],{lat:y,lon:g}=w,f=await v.get(`https://api.openweathermap.org/data/2.5/weather?lat=${y}&lon=${g}&appid=${u}&units=metric&lang=zh_cn`);t.value=f.data}catch(o){i.value=((s=(c=o.response)==null?void 0:c.data)==null?void 0:s.message)||o.message||"Failed to obtain weather information"}finally{l.value=!1}};return b(()=>{}),(c,s)=>(d(),h("div",P,[e("div",V,[s[1]||(s[1]=e("h1",{class:"main-title"},"Weather query",-1)),e("div",$,[e("div",C,a(k(m)),1),E(N)])]),e("div",S,[e("div",A,[e("div",K,[x(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>n.value=o),type:"text",placeholder:"Enter the city name (eg Beijing, Shanghai, London)",class:"search-input",onKeyup:I(_,["enter"])},null,544),[[W,n.value]]),e("button",{onClick:_,class:"search-btn",disabled:l.value},a(l.value?"Searching...":"Search"),9,M)])]),i.value?(d(),h("div",R,a(i.value),1)):p("",!0),t.value?(d(),h("div",T,[e("div",q,[e("div",D,[e("h2",L,a(t.value.name)+", "+a(t.value.sys.country),1),e("div",H,a(Math.round(t.value.main.temp))+"°C",1)]),e("div",U,[e("div",Y,[e("div",j,[e("img",{src:`https://openweathermap.org/img/wn/${t.value.weather[0].icon}@2x.png`,alt:t.value.weather[0].description},null,8,z)]),e("div",F,a(t.value.weather[0].description),1)]),e("div",O,[e("div",G,[s[2]||(s[2]=e("span",{class:"stat-label"},"Body temperature:",-1)),e("span",J,a(Math.round(t.value.main.feels_like))+"°C",1)]),e("div",Q,[s[3]||(s[3]=e("span",{class:"stat-label"},"Humidity:",-1)),e("span",X,a(t.value.main.humidity)+"%",1)]),e("div",Z,[s[4]||(s[4]=e("span",{class:"stat-label"},"Air pressure:",-1)),e("span",ee,a(t.value.main.pressure)+" hPa",1)]),e("div",se,[s[5]||(s[5]=e("span",{class:"stat-label"},"Wind speed:",-1)),e("span",te,a(t.value.wind.speed)+" m/s",1)]),e("div",ae,[s[6]||(s[6]=e("span",{class:"stat-label"},"Visibility:",-1)),e("span",oe,a(t.value.visibility/1e3)+" km",1)])])])])])):p("",!0)])]))}},ue=B(ie,[["__scopeId","data-v-dadee2d6"]]);export{ue as default};
